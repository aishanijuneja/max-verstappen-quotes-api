<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Max Verstappen Quotes</title>
    <link rel="stylesheet" href="styles.css"> <!-- Link to external CSS -->
</head>
<body>

    <div class="header">
        <h1>Max Verstappen Quotes 🏎️</h1>
        <h2>🏎️ Because censorship makes no sense 🏎️</h2>
    </div>

    <!-- Quote Display Box with Refresh Icon -->
    <div class="quote-box" id="quoteBox">
        <div class="quote-text-container">
            <p id="quoteText">"Click the refresh icon to load a quote!"</p>
            <span id="refreshIcon" class="refresh-icon">🔄</span> <!-- Refresh icon -->
        </div>
    </div>

    <!-- Box for All Quotes -->
    <div class="quote-box" id="allQuotesBox">
        <p><span class="all-quotes-icon">👁️</span> All Quotes</p>
        <div id="quoteList" class="quote-list">
            <!-- All quotes will be injected here dynamically -->
        </div>
    </div>

    <div class="footer">
        <p>🏖️ 📷 @aishanijuneja</p> <!-- Beach + Camera emoji for Instagram -->
        <span>🏎️ #MAX#1/33</span>
    </div>

    <script>
        // Fetch quotes from the API (quotes.js)
        async function fetchRandomQuote() {
            try {
                const response = await fetch('/.netlify/functions/quote'); // Call your API
                const data = await response.json();
                document.getElementById('quoteText').innerText = `"${data.quote}"`;
            } catch (error) {
                console.error('Error fetching quote:', error);
                document.getElementById('quoteText').innerText = "Error fetching quote!";
            }
        }

        // Refresh icon functionality
        document.getElementById('refreshIcon').addEventListener('click', fetchRandomQuote);
        fetchRandomQuote(); // Fetch a quote when the page loads

        // Populate the quote list with all quotes from API
        async function fetchAllQuotes() {
            try {
                const response = await fetch('/.netlify/functions/quote');
                const data = await response.json();
                const quoteListDiv = document.getElementById('quoteList');
                quoteListDiv.innerHTML = ''; // Clear previous quotes if any
                data.forEach(quote => {
                    const quoteItem = document.createElement('p');
                    quoteItem.innerText = quote;
                    quoteListDiv.appendChild(quoteItem);
                });
            } catch (error) {
                console.error('Error fetching all quotes:', error);
            }
        }

        fetchAllQuotes(); // Fetch all quotes for display

        // Expand and collapse quotes display
        document.getElementById('allQuotesBox').addEventListener('click', () => {
            const quoteListDiv = document.getElementById('quoteList');
            const isExpanded = quoteListDiv.classList.toggle('show'); // Toggle the class

            // Change height based on expansion state
            quoteListDiv.style.height = isExpanded ? `${quoteListDiv.scrollHeight}px` : '0px'; // Set height for animation
        });

        // Custom Cursor Effect
        const cursor = document.createElement('div');
        cursor.classList.add('custom-cursor');
        document.body.appendChild(cursor);

        document.addEventListener('mousemove', (e) => {
            cursor.style.left = e.pageX + 'px';
            cursor.style.top = e.pageY + 'px';
        });
    </script>

</body>
</html>
